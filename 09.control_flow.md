# 控制流 {#control-flow}

截止到現在，在我們所看過的程式中，總是有一系列語句從上到下精確排列，並交由 Python 忠實地執行。如果你想改變這一工作流程，應該怎麼做？就像這樣的情況：你需要程式作出一些決定，並依據不同的情況去完成不同的事情，例如依據每天時間的不同列印出 '早上好' 'Good Morning' 或 '晚上好' 'Good Evening'？

正如你你可能已經猜測到的那番，這是通過控制流語句來實現的。在 Python 中有三種控制流語句——`if` `for` 和 `while`。

## `if` 語句

`if` 語句用以檢查條件：*如果* 條件為真（True），我們將運行一塊語句（稱作 _if-block_ 或 _if 塊_），*否則* 我們將運行另一塊語句（稱作 _else-block_ 或 _else 塊_）。其中 *else* 從句是可選的。

案例（保存為 `if.py`）：

<!-- 代碼塊內不會啟用標簽擴展 https://github.com/GitbookIO/gitbook/issues/707 -->
<pre><code class="lang-python">{% include "./programs/if.py" %}</code></pre>

輸出：

<pre><code>{% include "./programs/if.txt" %}</code></pre>

**它是如何工作的**

在這個程式中，我們根據用戶猜測的數字來檢查這一數字是否是我們所設置的。我們將變量 `number` 設為任何我們所希望的整數，例如 `23`。然後，我們通過 `input()` 函數來獲取用戶的猜測數。所謂函數是一種可重複使用的程式。我們將在[下一章](./10.functions.md#functions)詳細討論它。

我們為內置的 `input` 函數提供一串列印到螢幕上的字串並等待用戶的輸入。一旦我們輸入了某些內容並按下鍵盤上的 `enter` 鍵，`input()` 函數將以字串的形式返回我們所輸入的內容。然後我們通過 `int` 將這個字串轉換成一個整數並將其儲存在變量 `guess` 中。實際上，`int` 是一個類（Class），但你現在你所需要知道的就是你可以使用它將一串字串轉換成一個整數（假設這個字串的文本中含有一個有效的整數）。

接下來，我們將用戶提供的猜測數與我們所選擇的數字進行對比。如果它們相等，我們就列印一條成功資訊。在這里要注意到我們使用縮進級別來告訴 Python 哪些語句分別屬于哪個塊。這便是為什麼在 Python 中縮進如此重要。我希望你能夠堅持『縮進一致』的原則，你能做到吧？

另外需要注意的是 `if` 語句在結尾處包含一個冒號——我們借此向 Python 指定接下來會有一塊語句在後頭。

然後，我們檢查猜測數是否小于我們選擇的數字，如果是，我們將告訴用戶他們必須猜一個更高一些的數字。在這里我們使用的是 `elif` 語句，它們實際上將兩個相連的 `if else-if else` 語句合並成一句 `if-elif-else` 語句。這能夠使程式更加簡便，並且可以減少所需要的縮進量。

`elif` 和 `else` 同樣都必須有一個冒號在其邏輯行的末尾，後面跟著與它們相應的語句塊（當然，別忘了恰當的縮進）。

你可以在 if 塊的 一個 `if` 語句中設置另一個 `if` 語句，並可以如此進行下去——這被稱作嵌套的 `if` 語句。

要記住 `elif` 和 `else` 部分都是可選的。一個最小規模且有效的 `if` 語句是這樣的：

```python
if True:
    print('Yes, it is true')
```

當 Python 完整執行了 `if` 語句及與其相關的 `elif` 和 `else` 子句後，它將會移動至包含 `if` 語句的代碼塊的下一句語句中。在本例中，也就是主代碼塊（程式開始執行的地方），其下一句語句就是 `print('Done')` 語句。在完成這些工作後，Python 會發現已行至程式末尾並宣告工作的完成。

盡管這是一個非常簡單的程式，我也一直在其中指出你應該注意的事情。所有的這些都可算是簡單易懂（對于那些具有 C/C++ 背景的人來說是相當簡單易懂）。不過在開始時它們還是可能會不斷吸引你的注意，不斷地去在意它們。但經過一些更豐富的操作後你就會習慣它們及其中的邏輯，它們對于你來說將會成為『自然而然』的事情。

> **針對 C/C++ 程式員的提示**
> 
> Python 中不存在 `switch` 語句。你可以通過使用 `if..elif..else` 語句來實現同樣的事情（在某些情況下，使用一部[字典](./12.data_structures.md#dictionary)能夠更快速地完成）。

## `while` 語句

`while` 語句能夠讓你在條件為真的前提下重複執行某塊語句。 `while` 語句是 *迴圈（Looping）* 語句的一種。`while` 語句同樣可以擁有 `else` 子句作為可選選項。

案例（保存為 `while.py`）：

<pre><code class="lang-python">{% include "./programs/while.py" %}</code></pre>

輸出：

<pre><code>{% include "./programs/while.txt" %}</code></pre>

**它是如何工作的**

在這一程式中，我們依舊通過猜數游戲來演示，不過新程式的優點在于能夠允許用戶持續猜測直至他猜中為止——而無需像我們在上一節中所做的那樣，每次猜測都要重新運行程式。這種變化恰到好處地演示了 `while` 語句的作用。

首先我們將 `input` 與 `if` 語句移到 `while` 迴圈之中，並在 while 迴圈開始前將變量 `running` 設置為 `True`。程式開始時，我們首先檢查變量 `running` 是否為 `True`，之後再執行相應的 *while 塊*。在這一代碼塊被執行之後，將會重新對條件進行檢查，在本例中也就是 `running` 變量。如果它依舊為 `True`，我們將再次執行 while 塊，否則我們將繼續執行可選的 else 塊，然後進入到下一個語句中。

`else` 代碼塊在 `while` 迴圈的條件變為 `False` 時開始執行——這個開始的時機甚至可能是在第一次檢查條件的時候。如果 `while` 迴圈中存在一個 `else` 代碼塊，它將總是被執行，除非你通過 `break` 語句來中斷這一迴圈。

`True` 和 `False` 被稱作布爾（Bollean）型，你可以將它們分別等價地視為 `1` 與 `0`。

> **針對 C/C++ 程式員的提示**
> 
> 你可以在 `while` 迴圈中使用 `else` 從句。


## `for` 迴圈

`for...in` 語句是另一種迴圈語句，其特點是會在一系列物件上進行*迭代（Iterates）*，意即它會遍歷序列中的每一個專案。我們將在後面的[序列（Sequences）](./12.data_structures.md#sequence)章節中了解有關它的更多內容。現在你所需要的就是所謂佇列就是一系列專案的有序集合。

案例（保存為 `for.py`）：

<pre><code class="lang-python">{% include "./programs/for.py" %}</code></pre>

輸出：

<pre><code>{% include "./programs/for.txt" %}</code></pre>

**它是如何工作的**

在這一程式中，我們列印了一*序列*的數字。我們通過內置的 `range` 函數生成這一數字序列。

在這里我們所要做的事情是提供兩個數字，而 `range` 將會返回一序列的數字，從第一個數字開始，至第二個數字結束。舉個例子，`range(1,5)` 將輸出序列 `[1, 2, 3, 4]`。在默認情況下，`range` 將會以 1 逐步遞增。如果我們向 `range` 提供第三個數字，則這個數字將成為逐步遞增的加數。同樣舉個例子來說明，`range(1,5,2)` 將會輸出 `[1, 3]`。要記住這一序列擴展*直到*第二個數字，也就是說，它*不會*包括第二個數字在內。

另外需要注意的是，`range()` 每次只會生成一個數字，如果你希望獲得完整的數字列表，要在使用 `range()` 時調用 `list()`。例如下面這樣：`list(range(5))` ，它將會返回 `[0, 1, 2, 3, 4]`。有關列表的詳細解釋將會在 [《資料結構》一章](./12.data_structures.md#data-structures)呈現。

然後 `for` 迴圈就會在這一範圍內展開遞歸——`for i in range(1,5)` 等價于 `for i in [1, 2, 3, 4]`，這個操作將依次將佇列里的每個數字（或是物件）分配給 `i`，一次一個，然後以每個 `i` 的值執行語句塊。在本例中，我們這一語句塊所做的就是列印出這些值。

同樣要記住，`else` 部分是可選的。當迴圈中包含他時，它總會在 `for` 迴圈結束後開始執行，除非程式遇到了 [break](#break-statement) 語句。

另一個需要注意的地方是 `for...in` 能在任何佇列中工作。在這里，我們有的是通過內置的 `range` 函數生成的一串數字列表，但總體來說我們可以包含任何類型物件的佇列！我們將會在後面的章節詳細解釋這一觀念。

> **針對 C/C++/Java/C# 程式員的提示**
> 
> Python 中的 `for` 迴圈和 C/C++ 中的 `for` 迴圈可以說是完全不同。C# 程式員會注意到 Python 中的 `for` 迴圈與 C# 中的 `foreach` 迴圈相似。Java 程式員則會注意到它同樣與 Java 1.5 中的 `for (int i : IntArray)` 無甚區別。
> 
> 在 C/C++ 中，如果你希望編寫 `for (int i = 0; i < 5; i++)`，那麼在 Python 你只需要寫下 `for i in range(0,5)`。正如你所看到的，Python 中的 `for` 迴圈將更加簡單，更具表現力且更不容易出錯。

## `break` 語句 {#break-statement}

`break` 語句用以*中斷*（Break）迴圈語句，也就是中止迴圈語句的執行，即使迴圈條件沒有變更為 `False`，或佇列中的專案尚未完全迭代依舊如此。

有一點需要尤其注意，如果你的 *中斷* 了一個 `for` 或 `while` 迴圈，任何相應迴圈中的 `else` 塊都將*不會*被執行。

案例（保存為 `break.py`）：

<pre><code class="lang-python">{% include "./programs/break.py" %}</code></pre>

輸出：

<pre><code>{% include "./programs/break.txt" %}</code></pre>

**它是如何工作的**

在本程式中，我們重複地接受用戶的輸入內容並列印出每一次輸入內容的長度。我們通過檢查用戶輸入的是否是 `quit` 這一特殊條件來判斷是否應該終止程式。我們通過*中斷*迴圈並轉進至程式末尾來結束這一程式。

輸入字串的長度可以通過內置的 `len` 函數來找到。

記住，`break` 語句同樣可以適用于 `for` 迴圈。

**Swaroop 的詩意 Python**

我所使用的輸入內容是一首我所寫的小詩：

```
Programming is fun
When the work is done
if you wanna make your work also fun:
    use Python!
```
## `continue` 語句 {#continue-statement}

`continue` 語句用以告訴 Python 跳過當前迴圈塊中的剩余語句，並*繼續*該迴圈的下一次迭代。

案例（保存為 `continue.py`）：

<pre><code class="lang-python">{% include "./programs/continue.py" %}</code></pre>

輸出：

<pre><code>{% include "./programs/continue.txt" %}</code></pre>

**它是如何工作的**

在本程式中，我們接受來自用戶的輸入內容，但是只有在輸入的字串其長至少 3 字符我們才會對其進行處理。為此，我們使用內置的 `len` 函數和來獲取字串的長度，如果其長度小于 3，我們便通過使用 `continue` 語句跳過代碼塊中的其余語句。否則，迴圈中的剩余語句將被執行，並在此處進行我們所希望的任何類型的處理。

要注意 `continue` 語句同樣能用于 `for` 迴圈。

## 總結

我們已經了解了三種控制流語句——`if`，`while` 和 `for` ——及其相關的 `break` 與 `continue` 語句是如何工作的。這些語句是 Python 中一些最常用的部分，因此，習慣去使用它們是必要的。

接下來，我們將了解如何創建並使用函數。
